<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Savnac</title>
  <style>
    html, body {margin:0;padding:0;height:100%;box-sizing:border-box;overflow-x:hidden;font-family:Arial, sans-serif;-webkit-font-smoothing:antialiased;}
    body {background:#121212;color:#fff;transition:background .28s ease,color .28s ease;min-height:100vh;padding-top:48px;}
    .top-bar{position:fixed;top:0;left:0;right:0;height:48px;display:flex;align-items:center;justify-content:space-between;padding:6px 14px;background:rgba(26,26,26,0.78);backdrop-filter:blur(6px);border-bottom:1px solid rgba(255,255,255,0.03);z-index:9999;gap:12px;}
    .top-left,.top-center,.top-right{display:flex;align-items:center;gap:10px;font-size:14px;color:inherit;}
    .top-center{margin:0 auto;gap:12px;}
    .btn{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06);color:inherit;padding:6px 10px;border-radius:6px;cursor:pointer;font-size:13px;transition:transform .12s,box-shadow .12s,background .12s;}
    .btn:hover{transform:translateY(-1px);box-shadow:0 4px 10px rgba(0,0,0,0.4);background:rgba(255,255,255,0.06);}
    .btn.active{box-shadow:0 8px 26px rgba(0,0,0,0.55);transform:translateY(-1px);}
    body.light-mode .btn.active{background:rgba(0,0,0,0.06);}
    .page-wrap{display:flex;justify-content:center;align-items:flex-start;padding:18px;}
    .content-wrapper{width:100%;max-width:500px;text-align:center;z-index:2;}
    #particles-js{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;background:#121212;transition:background .3s ease;}
    h1{font-size:34px;margin:6px 0 14px 0;text-shadow:0 0 10px rgba(255,255,255,0.6);color:inherit;}
    #randomAbove{margin-bottom:8px;}
    #searchInput{width:100%;box-sizing:border-box;padding:10px;border-radius:6px;border:1px solid rgba(255,255,255,0.06);background:rgba(31,31,31,0.9);color:inherit;font-size:16px;outline:none;transition:background .2s,color .2s;}
    #gamesContainer{width:100%;max-height:400px;overflow-y:auto;border-radius:6px;border:1px solid rgba(255,255,255,0.04);background:rgba(26,26,26,0.85);backdrop-filter:blur(6px);margin-top:10px;position:relative;}
    #filterActions{padding:6px;display:none;}
    #gamesList{list-style:none;margin:0;padding:0;}
    #gamesList li{border-bottom:1px solid rgba(255,255,255,0.03);display:flex;justify-content:space-between;align-items:center;}
    #gamesList li a{display:flex;align-items:center;gap:10px;padding:10px;color:inherit;text-decoration:none;flex:1;}
    #gamesList li a:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(0,0,0,0.6);text-shadow:0 0 10px currentColor;}
    #gamesList img{width:40px;height:40px;object-fit:cover;border-radius:4px;}
    .star{cursor:pointer;font-size:18px;padding:0 8px;color:#fff;transition:color .2s;user-select:none;}
    .star.favorited{color:gold;}
    body.light-mode .star{color:#888;}
    .panic-text{margin-top:18px;font-size:20px;color:inherit;}
    .visitor-highlight{transition:opacity .6s, text-shadow .45s;}
    .visitor-animate{ text-shadow:0 0 16px rgba(0,255,200,0.25); }
    body.light-mode{background:#fff;color:#000;}
    body.light-mode #particles-js{background:#fff;}
    body.light-mode #searchInput{background:#f7f7f7;color:#000;border:1px solid #ddd;}
    body.light-mode #gamesContainer{background:rgba(250,250,250,0.9);border:1px solid #e6e6e6;}
    body.light-mode .top-bar{background:rgba(255,255,255,0.9);color:#000;border-bottom:1px solid rgba(0,0,0,0.06);}
    .settings-modal {position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0.95);background:rgba(26,26,26,0.95);border:1px solid rgba(255,255,255,0.1);border-radius:8px;padding:20px;z-index:10000;display:none;flex-direction:column;gap:12px;min-width:260px;backdrop-filter:blur(6px);transition:transform .2s ease,opacity .2s ease;}
    .settings-modal.show {display:flex;opacity:1;transform:translate(-50%,-50%) scale(1);}
    .settings-input {padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.05);color:inherit;}
    .checkmark {display:none;color:limegreen;font-weight:bold;}
    .checkmark.show {display:inline;}
    @media (max-width:600px){.top-center{display:none;}h1{font-size:28px}.top-bar{padding:6px 8px;height:44px}}
  </style>
</head>
<body>
  <div id="particles-js"></div>

  <div class="top-bar">
    <div class="top-left">
      <span id="welcomeMessage" style="font-weight:600;"></span>
      <button class="btn" id="randomTopBtn">Random Game</button>
      <button class="btn" id="settingsBtn">⚙</button>
    </div>
    <div class="top-center">
      <span id="visitorDisplay" class="visitor-highlight" style="opacity:0;">Visitors: loading...</span>
      <span id="dateTime" style="margin-left:10px;"></span>
    </div>
    <div class="top-right">
      <button class="btn" id="favBtn">Favorites</button>
      <button class="btn" id="recentsBtn">Recents</button>
      <button class="btn" id="modeToggle">Light/Dark</button>
    </div>
  </div>

  <div class="page-wrap">
    <div class="content-wrapper">
      <h1 id="siteTitle">Savnac</h1>
      <div id="randomAbove"></div>
      <input id="searchInput" type="text" placeholder="Search games...">

      <div id="gamesContainer">
        <div id="filterActions"></div>
        <ul id="gamesList">
          <li><a href="1v1lol.html"><img src="https://img.utdstc.com/icon/983/22a/98322a3b2be892eed31589906ffd949b68bcccc9a21ba562987965b5ec6bc6de:200"><span>1v1.lol</span></a><span class="star">★</span></li>
          <li><a href="2048.html"><img src="https://is1-ssl.mzstatic.com/image/thumb/Purple211/v4/95/8e/c3/958ec36e-06b1-0897-53b3-c968234bf47f/AppIcon-0-0-1x_U007emarketing-0-6-85-220.png/512x512bb.jpg"><span>2048</span></a><span class="star">★</span></li>
          <li><a href="bitlife.html"><img src="https://is1-ssl.mzstatic.com/image/thumb/Purple221/v4/16/26/fc/1626fc2c-9962-4f66-15d8-7d6b346c4341/AppIcon-0-1x_U007emarketing-0-7-0-85-220.png/512x512bb.jpg"><span>BitLife</span></a><span class="star">★</span></li>
          <li><a href="cookieclicker.html"><img src="https://orteil.dashnet.org/cookieclicker/favicon.ico"><span>Cookie Clicker</span></a><span class="star">★</span></li>
          <li><a href="retro-bowl.html"><img src="https://images.crazygames.com/games/retro-bowl/cover_16x9-1708358101914.png?auto=format,compress&q=75&cs=strip"><span>Retro Bowl</span></a><span class="star">★</span></li>
          <li><a href="slope.html"><img src="https://slope-game.github.io/slope/logo.png"><span>Slope</span></a><span class="star">★</span></li>
          <li><a href="subwaysurfers.html"><img src="https://play-lh.googleusercontent.com/Ykiv1tXzyXHlvPwxY-h93E3WQ39_BdaA7jWqJfgk_BdAqa-GDsy-6zR-63l_wZy9LQ"><span>Subway Surfers</span></a><span class="star">★</span></li>
          <li><a href="tetris.html"><img src="https://play-lh.googleusercontent.com/1gKk8phzXr5rM-vb7wX3KIC2W9FQ_3x5rW2HX1nCzO5nKzQzX5jOT9F7eprf0DYhWKU"><span>Tetris</span></a><span class="star">★</span></li>
          <li><a href="tiny-fishing.html"><img src="https://tiny-fishing.github.io/logo.png"><span>Tiny Fishing</span></a><span class="star">★</span></li>
          <li><a href="crossyroad.html"><img src="https://play-lh.googleusercontent.com/jU1iSOVgG4ZxBj3P6bVnMyG6u4X4PKyFSm8hPX2lpsjyFzZgWqGmzIun1ZIM7uvm24k"><span>Crossy Road</span></a><span class="star">★</span></li>
          <!-- You can add more games here if needed -->
        </ul>
      </div>

      <h2 class="panic-text">teacher panic key is "q" but i still recomend switching tabs
      (do ctrl+d to bookmark)</h2>
    </div>
  </div>

  <div class="settings-modal" id="settingsModal">
    <label>Site Title (changes tab name):</label>
    <input type="text" id="titleInput" class="settings-input">
    <button class="btn" id="saveTitleBtn">Save</button>
    <span id="saveCheck" class="checkmark">✔</span>
  </div>

  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script>
    document.getElementById('siteTitle').textContent = "Savnac";
    document.title = localStorage.getItem('siteTitle') || "Savnac";

    const gamesList = document.querySelectorAll("#gamesList li");
    const stars = document.querySelectorAll(".star");
    const favBtn = document.getElementById("favBtn");
    const recentsBtn = document.getElementById("recentsBtn");
    const searchInput = document.getElementById("searchInput");
    const filterActions = document.getElementById("filterActions");

    let favorites = JSON.parse(localStorage.getItem("favorites") || "[]");
    let recents = JSON.parse(localStorage.getItem("recents") || "[]");
    let currentFilter = null;

    function updateFavorites() {
      stars.forEach((star, i) => {
        star.classList.toggle("favorited", favorites.includes(i));
        star.onclick = () => {
          if (favorites.includes(i)) favorites = favorites.filter(f => f !== i);
          else favorites.push(i);
          localStorage.setItem("favorites", JSON.stringify(favorites));
          updateFavorites();
        };
      });
    }
    updateFavorites();

    function filterGames(mode) {
      if (currentFilter === mode) {
        currentFilter = null;
        gamesList.forEach(li => li.style.display = "");
        filterActions.style.display = "none";
        favBtn.classList.remove("active");
        recentsBtn.classList.remove("active");
        return;
      }
      currentFilter = mode;
      gamesList.forEach((li, i) => {
        li.style.display = (mode === "favorites" && !favorites.includes(i)) ? "none" :
                           (mode === "recents" && !recents.includes(i)) ? "none" : "";
      });
      filterActions.style.display = "block";
      filterActions.innerHTML = `<button class="btn" onclick="clear${mode.charAt(0).toUpperCase()+mode.slice(1)}()">Clear ${mode}</button>`;
      favBtn.classList.toggle("active", mode === "favorites");
      recentsBtn.classList.toggle("active", mode === "recents");
    }

    function clearFavorites() {
      favorites = [];
      localStorage.setItem("favorites", "[]");
      updateFavorites();
      filterGames("favorites");
    }
    function clearRecents() {
      recents = [];
      localStorage.setItem("recents", "[]");
      filterGames("recents");
    }

    favBtn.onclick = () => filterGames("favorites");
    recentsBtn.onclick = () => filterGames("recents");

    gamesList.forEach((li, i) => {
      li.querySelector("a").addEventListener("click", () => {
        if (!recents.includes(i)) {
          recents.unshift(i);
          if (recents.length > 5) recents.pop();
          localStorage.setItem("recents", JSON.stringify(recents));
        }
      });
    });

    searchInput.addEventListener("input", () => {
      const query = searchInput.value.toLowerCase();
      gamesList.forEach(li => {
        li.style.display = li.textContent.toLowerCase().includes(query) ? "" : "none";
      });
    });

    document.addEventListener("click", e => {
      if (currentFilter && !document.getElementById("gamesContainer").contains(e.target) &&
          !favBtn.contains(e.target) && !recentsBtn.contains(e.target)) {
        filterGames(currentFilter);
      }
    });

    document.getElementById("randomTopBtn").onclick = () => {
      const visible = Array.from(gamesList).filter(li => li.style.display !== "none");
      if (visible.length > 0) window.location.href = visible[Math.floor(Math.random()*visible.length)].querySelector("a").href;
    };

    fetch("https://api.counterapi.dev/v1/savnaclive.github.io/savnac/up")
      .then(r => r.json())
      .then(data => {
        const visitorDisplay = document.getElementById("visitorDisplay");
        visitorDisplay.textContent = `Visitors: ${data.count}`;
        visitorDisplay.style.opacity = 1;
        visitorDisplay.classList.add("visitor-animate");
      });

    function updateTime() {
      document.getElementById("dateTime").textContent = new Date().toLocaleString();
    }
    setInterval(updateTime, 1000); updateTime();

    document.addEventListener("keydown", e => { if (e.key==="q") window.location.href="https://canvas.nebo.edu/"; });

    document.getElementById("modeToggle").onclick = () => document.body.classList.toggle("light-mode");

    particlesJS.load('particles-js', 'https://cdn.jsdelivr.net/gh/VincentGarreau/particles.js/demo/particles.json');

    const settingsBtn = document.getElementById('settingsBtn');
    const settingsModal = document.getElementById('settingsModal');
    const titleInput = document.getElementById('titleInput');
    const saveTitleBtn = document.getElementById('saveTitleBtn');
    const saveCheck = document.getElementById('saveCheck');

    settingsBtn.addEventListener('click', () => {
      titleInput.value = document.title;
      settingsModal.classList.add('show');
    });

    saveTitleBtn.addEventListener('click', () => {
      localStorage.setItem('siteTitle', titleInput.value);
      document.title = titleInput.value || "Savnac";
      saveCheck.classList.add('show');
      setTimeout(()=>saveCheck.classList.remove('show'),1500);
      settingsModal.classList.remove('show');
    });

    document.addEventListener('keydown', e => {
      if (e.key === "Escape") {
        if (settingsModal.classList.contains('show')) settingsModal.classList.remove('show');
        else if (currentFilter) filterGames(currentFilter);
      }
    });
  </script>
</body>
</html>
